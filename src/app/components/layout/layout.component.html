<div class="layout-container flex">
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-button" (click)="toggleMobileSidebar()" aria-label="Toggle menu">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay" [class.show]="mobileSidebarOpen()" (click)="closeMobileSidebar()"></div>

  <!-- Sidebar -->
  <aside class="sidebar" [class.open]="mobileSidebarOpen()">
    <!-- Logo Section -->
    <div class="logo-section">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-purple-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
          </svg>
        </div>
        <div>
          <h1 class="text-xl font-bold">Telco CRM</h1>
          <p class="text-purple-200 text-sm">Admin Panel</p>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 mt-8">
      <button 
        *ngFor="let item of navigationItems()" 
        (click)="item.route ? navigateToAndClose(item.route) : item.action?.()"
        class="nav-item w-full flex items-center px-6 py-3"
        [class.active]="isNavItemActive(item.route || '')">
        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="item.icon"></path>
        </svg>
        {{ item.label }}
      </button>
    </nav>

    <!-- User Info Section -->
    <div class="user-info">
      <div class="flex items-center">
        <div class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center">
          <svg class="w-6 h-6 text-purple-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium text-white">{{ currentUser()?.fullName || 'Admin User' }}</p>
          <p class="text-xs text-purple-200">{{ currentUser()?.username }}</p>
        </div>
      </div>
      <button (click)="logoutAndClose()" class="mt-4 w-full flex items-center justify-center px-4 py-2 bg-purple-800 text-white rounded-lg hover:bg-purple-600 transition duration-200">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
        </svg>
        Logout
      </button>
    </div>
  </aside>

  <!-- Main Content Area -->
  <div class="main-content" [class.mobile-sidebar-open]="mobileSidebarOpen()">
    <!-- Header -->
    <header class="header">
      <div class="px-8 py-4 flex items-center justify-between">
        <div class="flex-1">
          <h2 class="text-2xl font-bold text-gray-800">{{ title() }}</h2>
          <p class="text-gray-600">{{ subtitle() }}</p>
        </div>
        <div class="flex items-center space-x-4">
          <button (click)="refreshData()" class="flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition duration-200">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Refresh
          </button>
          <div class="text-sm text-gray-600">
            <span>{{ currentTime() }}</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="content-area">
      <ng-content></ng-content>
    </main>
  </div>
</div>
